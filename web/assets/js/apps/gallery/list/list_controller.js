// Generated by CoffeeScript 1.10.0
(function() {
  app.module('GalleryApp.List', function(List, app, Backbone, Marionette, $, _) {
    List.Controller = {
      listAlbums: function() {
        var albumsListLayout, fetchingAlbums, loadingView;
        loadingView = new app.Common.Views.Loading;
        app.mainRegion.show(loadingView);
        albumsListLayout = new List.Layout;
        fetchingAlbums = app.request('album:entities');
        $.when(fetchingAlbums).done(function(albumsCollection) {
          var albumsListView;
          albumsListView = new List.Albums({
            collection: albumsCollection
          });
          albumsListLayout.on('show', function() {
            albumsListLayout.albumsRegion.show(albumsListView);
          });
          app.mainRegion.show(albumsListLayout);
        });
      }
    };
  });

}).call(this);
